<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mascotas</title>
	<link href="../dist/css/styles.css" rel="stylesheet" />
</head>
<body>
	<header class="m-2">
		<nav class="flex items-center justify-between">
			<a href="../index.html" class="flex items-center gap-3">
				<img src="../assets/img/logo.png" alt="logo de adoptame" class="h-10" />
				<p class="font-montserrat font-bold">Adoptame</p>
			</a>
			<ul class="flex flex-col sm:flex-row gap-2 sm:gap-2 font-roboto">
				<li>
					<a class="hover:underline underline-offset-1" href="">
						Sobre nosotros
						</a>
				</li>
				<li>
					<a class="hover:underline underline-offset-1" href=""
						>Protectoras
						</a>
				</li>
				<li>
					<a class="hover:underline underline-offset-1" href="./mascotas.html">Mascotas</a>
				</li>
			</ul>
			<a
				href="./index.html"
				class="font-roboto font-bold border-2 border-customBlue text-black px-6 py-2 rounded-full transition duration-300 hover:bg-customBlue hover:text-white">
				Iniciar sesión
			</a>
		</nav>
	</header>

	<main>
		<section class="w-full h-64 bg-[url('http://127.0.0.1:5500/assets/img/huellas.png')] bg-cover bg-center flex items-center justify-center">
			<div class="bg-black/80 backdrop-blur-md p-6 rounded-lg flex items-end gap-4 w-[90%] max-w-2xl">

				<div class="flex w-full flex-col md:flex-row gap-4">
					<div class="w-full">
						<label for="tipo" class="block text-white text-sm font-semibold">Tipo de mascota</label>
						<select id="tipo" class="w-full p-2 rounded bg-white text-gray-800">
							<option value="todos">Perros, gatos, aves...</option>
							<option value="perros">Perros</option>
							<option value="gatos">Gatos</option>
						</select>
					</div>

					<div class="w-full">
						<label for="provincia" class="block text-white text-sm font-semibold">Localización</label>
						<select id="provincia" class="w-full p-2 rounded bg-white text-gray-800">
							<option value="todos">Todas</option>
							<option value="navarra">Navarra</option>
							<option value="álava">Álava</option>
							<option value="guipúzcoa">Guipúzcoa</option>
							<option value="vizcaya">Vizcaya</option>
						</select>
					</div>

					<div class="self-end">
						<button class="bg-customBlue hover:bg-customBlueHover text-white font-semibold py-2 px-6 rounded" id="buscar">
							Buscar
						</button>
					</div>
				</div>
			</div>
		</section>

		<section class="mt-10 bg-purple-100 p-10 rounded-lg">
			<h2 class="text-2xl font-bold text-gray-800 mb-6" id="cantidad_resultados">Sin resultados</h2>
			<div class="grid xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-6" id="resultados_mascotas"></div>
		</section>
	</main>

	<footer class="bg-customBlack p-4 text-white pl-4">
		<div class="flex flex-col sm:flex-row justify-evenly gap-4 mb-4">
			<div class="font-roboto">
				<a href="../index.html" class="flex items-center mb-4">
					<img src="../assets/img/logo.png" alt="logo de adoptame" class="h-10" />
					<p class="font-montserrat font-bold text-2xl ml-4">Adóptame, plataforma de adopción</p>
				</a>
				<div class="flex flex-col sm:flex-row justify-between sm:items-center w-full">
					<p class="font-bold">Siguenos en nuestras redes sociales: </p>
					<div class="flex gap-2">
						<img class="w-8 h-8" src="../assets/img/facebook.png" alt="">
						<img class="w-8 h-8" src="../assets/img/instagram.png" alt="">
						<img class="w-8 h-8" src="../assets/img/twiter.png" alt="">
						<img class="w-8 h-8" src="../assets/img/linkedin.png" alt="">
						<img class="w-8 h-8" src="../assets/img/youtube.png" alt="">
					</div>
				</div>
			</div>
			<div>
				<p class="font-bold">Horario de atención</p>
				<p>De Lunes a Sábado de 9 a 18 horas</p>
			</div>
			<div>
				<p class="font-bold">Contacto</p>
				<p>948000000</p>
				<p>info@adoptame.es</p>
			</div>
		</div>
		<div class="sm:text-center">
			<span>2024 ©Adóptame - Todos los derechos reservados</span>
		</div>
	</footer>

	<script>
		const mascotasDiv = document.querySelector('#resultados_mascotas')
		const cantidadResultadosH1 = document.querySelector('#cantidad_resultados')
		const buscarDiv = document.querySelector('#buscar')

		const tipoSelector = document.querySelector('#tipo')
		const provinciaSelector = document.querySelector('#provincia')

		const buscar = () => {
			const params = new URLSearchParams();

			if (tipoSelector.value !== 'todos') {
					params.append('categoria', tipoSelector.value);
			}
			if (provinciaSelector.value !== 'todos') {
					params.append('provincia', provinciaSelector.value);
			}

			const url = `http://localhost:3000/mascotas${params.toString() ? `?${params.toString()}` : ''}`;

			fetch(url)
					.then(response => response.json())
					.then(generarMascotas)
					.catch(error => console.error('Error al obtener mascotas:', error));
		}

		buscarDiv.addEventListener('click', buscar)

		const generarMascotas = (mascotas) => {
			cantidadResultadosH1.textContent = `${mascotas.length} resultados`;

			mascotasDiv.innerHTML = mascotas.map(x => `
			<div class="bg-white shadow-lg rounded-lg p-3">
				<img src="../assets/img/mascotas/${x.imagen}" alt="${x.nombre}" class="w-full h-48 object-cover rounded-md">
				<div class="p-4">
					<h3 class="text-lg font-semibold text-gray-900">${x.nombre}</h3>
					<ul class="mt-2 text-sm text-gray-500">
						<li><strong>Categoría:</strong> <span class="capitalize">${x.categoria}</span></li>
						<li><strong>Edad:</strong> ${x.edad} años</li>
						<li><strong>Prioridad:</strong> ${x.prioridad}</li>
					</ul>
					<p class="mt-2 text-gray-900 font-medium">${x.protectora}</p>
				</div>
			</div>
		`).join('')
		}

		fetch('http://localhost:3000/mascotas')
		.then(response => response.json())
		.then(generarMascotas)
	</script>
</body>
</html>
